function tvc_resetBackupsList() {
    var a = null;
    var b = "";
    var c = jQuery("#tvc-backups-list");
    tvc_getBackupsList(function (d) {
        if ("0" !== d) {
            a = JSON.parse(d);
            b = tvc_backupsTable(a)
        } else {
            b = tvc_emptyBackupsTable()
        }
        c.empty();
        c.append(b)
    })
}

function tvc_resetOptionSettings() {
    tvc_getSettingsOptions(function (b) {
        if (b) {
            var a = JSON.parse(b);
            jQuery("#tvc_auto_feed_fix_mode").prop("checked", a[0] === "true");
            jQuery("#tvc_background_processing_mode").prop("checked", a[3] === "true");
            jQuery("#tvc_third_party_attr_keys").val(a[1]);
            jQuery("#tvc_notice_mailaddress").val(a[2])
        }
    })
}

function tvc_backupsTable(d) {
    var c = "";
    for (var b = 0; b < d.length; b++) {
        var a = d[b].split("&&");
        var f = a[0];
        var e = a[1];
        c += '<tr id="feed-row"';
        if (b % 2 === 0) {
            c += ' class="alternate"'
        }
        c += ">";
        c += '<td id="file-name" value="' + f + '">' + f + "</td>";
        c += '<td id="file-date">' + e + "</td>";
        c += '<td id="actions"><strong><a href="javascript:void(0);" id="tvc-delete-' + f.replace(".", "-") + '-backup-action" onclick="tvc_deleteBackupFile(\'' + f + "')\">" + tvc_backup_list_form_vars.list_delete + " </a>";
        c += '| <a href="javascript:void(0);" id="tvc-restore-' + f.replace(".", "-") + '-backup-action" onclick="tvc_restoreBackupFile(\'' + f + "')\">" + tvc_backup_list_form_vars.list_restore + " </a>";
        c += '| <a href="javascript:void(0);" id="tvc-duplicate-' + f.replace(".", "-") + '-backup-action" onclick="tvc_duplicateBackupFile(\'' + f + "')\">" + tvc_backup_list_form_vars.list_duplicate + " </a></strong></td>";
        c += "</tr>"
    }
    return c
}

function tvc_emptyBackupsTable() {
    var a = "";
    a += "<tr>";
    a += "<td colspan = 4>" + tvc_backup_list_form_vars.no_backup + "</td>";
    a += "</tr>";
    return a
}

jQuery(document).ready(function () {
    tvc_resetBackupsList()
});