!function(i,u){i.fn.yith_wcpb_popup=function(p){var s=null;self.popup=i(this);var o={popup_class:"yith-wcpb-popup",overlay_class:"yith-wcpb-overlay",close_btn_class:"yith-wcpb-popup-close",position:"center",popup_delay:0,ajax:!(self.opts={}),ajax_container:"yith-wcpb-popup-ajax-container",url:"",ajax_data:{},ajax_complete:function(){},ajax_success:function(){},popup_css:{},block_params:{message:"",blockMsgClass:"yith-wcpb-popup-loader",css:{border:"none",background:"transparent"},overlayCSS:{background:"#fff",opacity:.7},ignoreIfBlocked:!0},loader:'<span class="yith-wcpb-popup-loader"></span>'};self.init=function(){self.opts=i.extend({},o,p),"close"!==p?(e(),1==self.opts.ajax?a():(self.popup=self.popup.clone(),self.popup.css(self.opts.popup_css).addClass("yith-wcpb-popup-opened"),i(u.body).append(self.popup)),l(),n(),t()):f()};var e=function(){0<i(u).find("."+self.opts.overlay_class).length?s=i(u).find("."+self.opts.overlay_class).first():(s=i("<div />").addClass(self.opts.overlay_class),i(u.body).append(s))},a=function(){self.popup=i("<div />").addClass(self.opts.popup_class);var p=i("<span />").addClass(self.opts.close_btn_class+" dashicons dashicons-no-alt"),s=i("<div />").addClass(self.opts.ajax_container);s.html(self.opts.loader),self.popup.append(s),i.ajax({data:self.opts.ajax_data,url:self.opts.url,success:function(p){self.popup.find("."+self.opts.ajax_container).html(p),c(),self.opts.ajax_success()},complete:function(){self.popup.append(p.hide().delay(500).fadeIn()),self.opts.ajax_complete()}}),i(u.body).append(popup)},l=function(){self.popup.css({position:"fixed",top:"45%",left:"45%",width:"5%",height:"5%"})},n=function(){i(u).on("click","."+self.opts.overlay_class,f),self.popup.on("click","."+self.opts.close_btn_class,f),i(u).on("keydown",function(p){27===p.keyCode&&f()})},t=function(){s.fadeIn("fast"),self.popup.fadeIn("fast",function(){self.opts.ajax||c()})},c=function(){self.popup.children().hide(),self.popup.show(),self.popup.animate({opacity:1,top:"20%",left:"15%",width:"70%",height:"70%",easing:"easeOutBounce"},{duration:300,complete:function(){self.popup.children().fadeIn("fast")}})},f=function(){i(u).find("."+self.opts.overlay_class).hide(),self.popup.hide(),self.popup.remove()};return self.init(),self.popup}}(jQuery,(window,document));